<div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8 w-full">
  <div class="sm:mx-auto sm:w-full sm:max-w-sm flex flex-col justify-center items-center">
    <svg
      width="256"
      height="256"
      viewBox="0 0 256 256"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="size-20"
    >
      <path
        d="M74.6667 192C86.4488 192 96 182.449 96 170.667C96 158.885 86.4488 149.333 74.6667 149.333C62.8846 149.333 53.3334 158.885 53.3334 170.667C53.3334 182.449 62.8846 192 74.6667 192Z"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M170.667 96C188.34 96 202.667 81.6731 202.667 64C202.667 46.3269 188.34 32 170.667 32C152.994 32 138.667 46.3269 138.667 64C138.667 81.6731 152.994 96 170.667 96Z"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M192 234.667C215.564 234.667 234.667 215.564 234.667 192C234.667 168.436 215.564 149.333 192 149.333C168.436 149.333 149.333 168.436 149.333 192C149.333 215.564 168.436 234.667 192 234.667Z"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M42.6667 64C54.4488 64 64 54.4487 64 42.6667C64 30.8846 54.4488 21.3333 42.6667 21.3333C30.8846 21.3333 21.3334 30.8846 21.3334 42.6667C21.3334 54.4487 30.8846 64 42.6667 64Z"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M149.333 192L93.4159 180.817"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M180.899 94.293L194.95 149.511"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M64 42.6667L140.417 53.5833"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M71.9371 149.511C74.6667 149.333 46.5026 63.651 46.5026 63.651"
        stroke="#2825DC"
        stroke-width="21.3333"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>

    <h2 class="mt-5 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900">Sign in to your account</h2>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
    <form
      class="space-y-6"
      [formGroup]="signInForm"
      (ngSubmit)="onSubmit()"
    >
      <div>
        <label
          for="email"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Email address</label
        >
        <div class="mt-2">
          <input
            id="email"
            name="email"
            type="email"
            autocomplete="email"
            required
            formControlName="email"
            class="bg-white block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 sm:text-sm sm:leading-6"
          />
        </div>
      </div>

      <div>
        @if (stage === "wait_submit" || stage === "sent") {
        <button
          type="submit"
          [ngClass]="stage === 'wait_submit' ? ' cursor-pointer bg-primary-600 hover:bg-primary-700' : 'cursor-wait bg-primary-100'"
          class="flex w-full justify-center rounded-md px-3 py-2 leading-6 shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600 transition-all"
        >
          @if (stage === "wait_submit") {
          <div class="text-white text-sm font-semibold">Send magic link</div>
          } @else if (stage === "sent") {
          <div class="flex flex-row gap-2">
            <div class="size-2 rounded-full bg-primary-600 animate-bounce"></div>
            <div class="size-2 rounded-full bg-primary-600 animate-bounce [animation-delay:-.3s]"></div>
            <div class="size-2 rounded-full bg-primary-600 animate-bounce [animation-delay:-.5s]"></div>
          </div>
          }
        </button>
        } @else if (stage === "success") {
        <div class="rounded-md bg-secondary-100 p-4 border border-secondary-200">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-secondary-900"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium text-secondary-900">Sent! Check your inbox</p>
            </div>
          </div>
        </div>
        } @else {
        <div class="rounded-md bg-red-50 p-4">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-400"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-sm font-medium text-red-800">{{ signupError }}</h3>
            </div>
          </div>
        </div>
        }
      </div>
    </form>
  </div>
</div>
